<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Lewis and Clark</title>
		<script type="text/javascript" src="d3.min.js"></script>
		<style type="text/css">
		</style>
	</head>
	<body>
		<script type="text/javascript">
			var w = 500;
			var h = 300;

			var projection = d3.geoAlbersUsa()
				.translate([w/2, h/2])
				.scale([w]);

			var path = d3.geoPath(projection);

			var svg = d3.select("body")
				.append("svg")
				.attr("width", w)
				.attr("height", h);

			d3.json("us-states.json").then(function(json) {
				svg.selectAll("path")
					.data(json.features)
					.enter()
					.append("path")
					.attr("d", path)
					.style("fill", "steelblue");;
			});

			d3.csv("lewis-and-clark-expedition-lewis-and-clark-campsites-bergant.csv").then(function(data) {
				var points = [];
				for (index = 0; index < data.length; index++) {
					points.push([parseFloat(data[index].Shape_X), parseFloat(data[index].Shape_Y)]);
				}

				svg.selectAll("circle")
					.data(data)
					.enter()
					.append("circle")
					.attr("cx", function(d) {
						return projection([parseFloat(d.Shape_X), parseFloat(d.Shape_Y)])[0];
					})
					.attr("cy", function(d) {
						return projection([parseFloat(d.Shape_X), parseFloat(d.Shape_Y)])[1];
					})
					.attr("r", 1)
					.style("fill", "yellow")
					.style("stroke", "gray")
					.style("stroke-width", 0.25)
					.style("opacity", "0.75")
					.append("title")
					.text(function(d) {
						return d.DISCUSSION;
					})
				return points;
			}).then(function(points){
				var linepath = svg.append("path")
			      .data([points])
			      .attr("d", line)
			      .attr('class', 'journey')
			})

			
		</script>
	</body>
</html>